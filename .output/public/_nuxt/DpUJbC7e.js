import{_ as D}from"./CmMIl-yO.js";import{f as S,u as $,r as v,h as E,i as N,j as U,o as a,g as V,w as _,a as s,c as n,k as b,F as y,t as r,l as e,m as C,b as A,d as k,n as T,p as M}from"./CLe3daI-.js";import{_ as z}from"./B0_oj8xZ.js";import"./BTx46m_-.js";async function I(){return await fetch("https://api.github.com/repos/localsend/localsend/releases",{method:"GET",headers:{Accept:"application/vnd.github+json"}}).then(o=>{if(o.ok)return o.json().then(f=>f[0].assets)})}const W={class:"mt-8 flex flex-wrap justify-center dark:text-gray-300"},q={class:"text-center text-2xl dark:text-white"},O={key:0,class:"mt-4 grid grid-cols-12 gap-4 dark:text-gray-300"},F={key:0,class:"col-span-12 rounded-lg bg-gray-100 p-4 dark:bg-gray-800 md:col-span-4"},G={class:"text-xl font-bold dark:text-white"},H={class:"dark:text-gray-400"},K=["innerHTML"],P={key:1,class:"col-span-12 rounded-lg bg-gray-100 p-4 dark:bg-gray-800 md:col-span-4"},X={class:"text-xl font-bold dark:text-white"},J={class:"mb-4 dark:text-gray-400"},Q={class:"text-xl font-bold dark:text-white"},Y={class:"dark:text-gray-400"},Z={class:"dark:text-white"},ee={class:"mt-2 rounded-lg bg-gray-200 p-2 text-sm dark:bg-gray-700 dark:text-gray-300"},te=["onClick"],ae={key:1,style:{height:"300px"}};var x=(m=>(m.windows="Windows",m.linux="Linux",m.android="Android",m))(x||{});const h="https://github.com/lingyicute/yidrop/releases",le=S({__name:"download",setup(m){const{t:o}=$();function f(){const d=navigator.userAgent,i=["Win","Macintosh","X11","Android","iP"].findIndex(t=>d.includes(t));return i!==-1?Object.values(x)[i]:"Windows"}const l=v(null);`${new URL(""+new URL("apple-store-badge.CVyK0T4N.svg",import.meta.url).href,import.meta.url).href}`;const u=v({}),p=E(()=>({Windows:{stores:[],binaries:[{name:"EXE",url:u.value.exe??h},{name:o("download.zip"),url:u.value.zip??h}]},Linux:{binaries:[{name:"TAR",url:u.value.gz??h},{name:"DEB",url:u.value.deb??h},{name:"AppImage",url:u.value.AppImage??h}]},Android:{binaries:[{name:"APK",url:u.value.apk??h}],packageManagers:[]}})),L=N();function R(d){l.value=d,L.push({query:{os:d.toLowerCase()}})}const w=v(!1);function j(d){navigator.clipboard.writeText(d),w.value=!0,setTimeout(()=>w.value=!1,3e3)}return U(async()=>{const d=(L.currentRoute.value.query.os??"").toLowerCase();l.value=Object.values(x).find(i=>i.toLowerCase()===d)??f();const g=await I();u.value=g.reduce((i,t)=>{const c=t.name.split(".").pop();return!c||c==="apk"&&!t.name.includes("arm64v8")||(i[c]=t.browser_download_url),i},{})}),(d,g)=>{const i=D;return a(),V(z,{"sub-title":e(o)("download.title")},{tabs:_(()=>[s("div",W,[(a(),n(y,null,b(x,t=>A(i,{key:t,class:"mx-2 mb-4",onClick:c=>R(t),dark:e(l)!==t},{default:_(()=>[k(r(t),1)]),_:2},1032,["onClick","dark"])),64))])]),content:_(()=>[s("h3",q,r(e(o)("download.subTitle",{os:e(l)})),1),e(l)?(a(),n("div",O,[e(p)[e(l)].stores.length!==0?(a(),n("div",F,[s("h3",G,r(e(o)("download.appStores")),1),s("p",H,r(e(o)("download.appStoresDescription")),1),(a(!0),n(y,null,b(e(p)[e(l)].stores,(t,c)=>(a(),n("div",{key:c,class:"mt-4"},[s("div",{innerHTML:t,class:"inline-block"},null,8,K)]))),128))])):C("",!0),e(p)[e(l)].binaries.length!==0?(a(),n("div",P,[s("h3",X,r(e(o)("download.binaries")),1),s("p",J,r(e(o)("download.binariesDescription")),1),(a(!0),n(y,null,b(e(p)[e(l)].binaries,t=>(a(),n("div",{key:t.name,class:"mt-2"},[A(T,{href:t.url,icon:"material-symbols:download",class:"dark:text-gray-300"},{default:_(()=>[k(r(t.name),1)]),_:2},1032,["href"])]))),128)),A(T,{href:"https://github.com/lingyicute/yidrop/releases",icon:"material-symbols:history",class:"mt-2 dark:text-gray-300"},{default:_(()=>[k(r(e(o)("download.allReleases")),1)]),_:1})])):C("",!0),e(p)[e(l)].packageManagers.length!==0?(a(),n("div",{key:2,class:M(["col-span-12 rounded-lg bg-gray-100 p-4 dark:bg-gray-800",e(p)[e(l)].stores.length!==0?"md:col-span-4":"md:col-span-8"])},[s("h3",Q,r(e(o)("download.packageManagers")),1),s("p",Y,r(e(o)("download.packageManagersDescription")),1),(a(!0),n(y,null,b(e(p)[e(l)].packageManagers,t=>(a(),n("div",{key:t.name,class:"mt-4"},[s("b",Z,r(t.name)+":",1),s("div",ee,[s("code",null,[(a(!0),n(y,null,b(t.commands,(c,B)=>(a(),n("span",{key:B,class:"cursor-pointer hover:bg-gray-300 dark:hover:bg-gray-600",onClick:()=>j(c)},[g[0]||(g[0]=s("span",{class:"text-gray-400 dark:text-gray-500 select-none"}," $ ",-1)),k(r(c),1),g[1]||(g[1]=s("br",null,null,-1))],8,te))),128))])])]))),128))],2)):C("",!0)])):(a(),n("div",ae)),s("div",{class:M(["absolute bottom-12 left-1/2 -translate-x-1/2 transform rounded-lg bg-teal-950 px-4 py-2 text-white transition-opacity",e(w)?"opacity-100":"hidden"])},r(e(o)("download.copiedToClipboard")),3)]),_:1},8,["sub-title"])}}});export{le as default};
